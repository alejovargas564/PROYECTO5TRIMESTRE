<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Mi Perfil</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-start justify-center pt-20">

<div class="max-w-lg mx-auto bg-white p-8 shadow-lg rounded-xl">

    <h2 class="text-2xl font-bold text-center text-indigo-600 mb-6">Mi Perfil</h2>

    <form th:action="@{/perfil/guardar}" th:object="${usuario}" method="post" class="space-y-4">

        <!-- ID (OBLIGATORIO) -->
        <input type="hidden" th:field="*{id}"/>

        <!-- CAMPOS NO EDITABLES PERO NECESARIOS -->
        <input type="hidden" th:field="*{userName}"/>
        <input type="hidden" th:field="*{correoUsuario}"/>
        <input type="hidden" th:field="*{tipoDocumento}"/>
        <input type="hidden" th:field="*{numeroDocumento}"/>
        <input type="hidden" th:field="*{rol}"/>
        <input type="hidden" th:field="*{estadoUsuario}"/>
        <input type="hidden" th:field="*{createAt}"/>

        <!-- Usuario (solo lectura) -->
        <div>
            <label class="font-medium text-gray-700">Usuario:</label>
            <input type="text" th:value="${usuario.userName}"
                   class="w-full px-3 py-2 rounded-lg bg-gray-200" readonly>
        </div>

        <!-- Correo (solo lectura) -->
        <div>
            <label class="font-medium text-gray-700">Correo:</label>
            <input type="email" th:value="${usuario.correoUsuario}"
                   class="w-full px-3 py-2 rounded-lg bg-gray-200" readonly>
        </div>

        <!-- Teléfono editable -->
        <div>
            <label class="font-medium text-gray-700">Teléfono:</label>
            <input type="text" th:field="*{telefonoUsuario}"
                   class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500"
                   required>
        </div>

        <!-- Nueva contraseña -->
        <div>
            <label class="font-medium text-gray-700">Nueva contraseña:</label>
            <input type="password" th:field="*{password}"
                   class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500"
                   placeholder="Déjalo vacío para mantener la actual">
            <small class="text-gray-500">Déjalo vacío si no deseas cambiarla.</small>
        </div>

        <!-- Botón -->
        <button type="submit"
                class="w-full bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700 transition">
            Guardar cambios
        </button>

    </form>

    <div th:if="${param.perfilActualizado}" class="mt-4 text-center text-green-600 font-medium">
        ✓ Perfil actualizado correctamente
    </div>

    <div th:if="${error}" class="mt-4 text-center text-red-600 font-medium">
        <span th:text="${error}"></span>
    </div>

</div>

</body>
</html>
